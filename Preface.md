# 前言

## 关于作者

Denis Bakhvalov是英特尔公司的高级开发人员，负责C++编译器项目，旨在为各种不同的架构生成最优代码。性能工程和编译器一直是他的主要兴趣之一。Denis于2008年开始他的软件开发职业生涯，并在多个领域工作，包括开发桌面应用程序、嵌入式系统、性能分析和编译器开发。2016年，Denis开始撰写他的easyperf.net博客，其中涉及性能分析和调优、C/C++编译器和CPU微架构。Denis是积极生活方式的坚定支持者，在业余时间喜欢踢足球、打网球、跑步和下棋。此外，Denis还是两个可爱女儿的父亲。

## 联系方式：

- 电子邮件：dendibakh@gmail.com
- Twitter：@dendibakh
- LinkedIn：@dendibakh

# 作者的话

我开始写这本书的初衷很简单：教育软件开发人员更好地了解他们的应用在现代硬件上的性能。我知道对于初学者或经验丰富的开发人员来说，这个主题可能会非常困惑。这种困惑通常发生在没有进行过性能相关任务的开发人员身上。但这没关系，因为每个专家都曾经是一个初学者。

我还记得我刚开始进行性能分析的日子。我盯着陌生的指标，试图匹配不符合的数据。我感到困惑。直到多年后，所有的零散知识最终融会贯通。当时，唯一的好资料来源是软件开发者手册，但这不是主流开发者喜欢阅读的内容。因此，我决定写这本书，希望能让开发者更容易学习性能分析的概念。

那些认为自己在性能分析方面还是初学者的开发者可以从书的开头开始顺序阅读，逐章深入。第2-4章为开发者提供了后续章节所需的最低知识。已经熟悉这些概念的读者可以选择跳过这些章节。此外，这本书还可以作为优化软件应用程序的参考书或清单。开发者可以将第7-11章作为调优代码的灵感来源。
# 目标读者

这本书主要适用于与性能关键应用程序和低级优化相关的软件开发人员。仅举几个例子：高性能计算（HPC）、游戏开发、数据中心应用（如Facebook、Google等）、高频交易。但是，本书的范围不限于上述行业。这本书对于任何希望更好地了解其应用程序性能并知道如何诊断和改进的开发人员都很有用。作者希望本书中提供的材料能帮助读者发展出可以应用于他们日常工作中的新技能。

读者需要具备对C/C++编程语言的基本背景，以理解书中的示例。了解基本的x86汇编语言阅读能力是有帮助的，但不是必需的要求。作者还期望读者熟悉计算机体系结构和操作系统的基本概念，如中央处理器、内存、进程、线程、虚拟和物理内存、上下文切换等。如果你对上述术语中的任何一个都不熟悉，建议你先学习相关材料。

# 致谢

非常感谢Mark E. Dawson, Jr.在本书的写作过程中提供帮助，他撰写了本书的几个章节：《优化DTLB》（8.1.3节）、《优化ITLB》（7.8节）、《缓存预热》（10.3节）、系统调优（10.5节）、关于多线程应用程序性能扩展和开销的第11.1节、关于使用COZ性能分析器的第11.5节、关于eBPF的第11.6节、《检测一致性问题》（11.7节）。Mark是高频交易行业的知名专家。Mark非常慷慨地分享了他的专业知识和反馈，对本书的不同阶段都提供了帮助。

接下来，我要感谢Sridhar Lakshmanamurthy，他撰写了关于CPU微架构的主要部分（第3节）。Sridhar在英特尔工作了几十年，是半导体行业的老将。

非常感谢Nadav Rotem，他是LLVM编译器中向量化框架的原始作者，帮助我撰写了关于向量化的第8.2.3节。

Clément Grégoire撰写了关于ISPC编译器的第8.2.3.7节。Clément在游戏开发行业拥有丰富的背景。他的评论和反馈帮助解决了游戏开发行业中的一些挑战。

本书的审稿人对完成这本书起到了至关重要的作用，他们是：Dick Sites、Wojciech Muła、Thomas Dullien、Matt Fleming、Daniel Lemire、Ahmad Yasin、Michele Adduci、Clément Grégoire、Arun S. Kumar、Surya Narayanan、Alex Blewitt、Nadav Rotem、Alexander Yermolovich、Suchakrapani Datt Sharma、Renat Idrisov、Sean Heelan、Jumana Mundichipparakkal、Todd Lipcon、Rajiv Chauhan、Shay Morag等人。

此外，我还要感谢整个性能社区发布的无数博客文章和论文。我从Travis Downs、Daniel Lemire、Andi Kleen、Agner Fog、Bruce Dawson、Brendan Gregg等人的博客中学到了很多知识。我站在巨人的肩膀上，这本书的成功不仅仅归功于我个人。这本书是我对整个社区的感谢和回馈之作。

最后，感谢我的家人，他们有足够的耐心容忍我错过周末旅行和晚间散步。没有他们的支持，我无法完成这本书。


